!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=13)}([function(e,t){e.exports=require("express")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.response=void 0;t.response=function(e,t,r,n){r.status(n).send({error:e,message:t})}},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureToken=void 0;var n=r(1);t.ensureToken=function(e,t,r){var o=e.headers.authorization;if(o){var a=o.split(" ")[1];e.token=a}else n.response(!0,{message:"You are not allowed to use this endpoint."},t,403);r()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toTitleCase=void 0;t.toTitleCase=function(e){return e.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}},function(e,t){e.exports=require("mongoose-unique-validator")},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AreasModel=void 0;var o=r(2),a=n(r(6)),s=new o.Schema({abstract:{required:!0,type:String},code:{default:1,type:Number},image:{default:"",type:String},name:{required:!0,type:String,unique:!0}});s.plugin(a.default);var i=o.model("areas",s);t.AreasModel=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MembersModel=void 0;var o=r(2),a=n(r(6)),s=new o.Schema({area:{ref:"areas",required:!0,type:o.Schema.Types.ObjectId},birthday:{required:!0,type:Date},career:{ref:"careers",required:!0,type:o.Schema.Types.ObjectId},code:{maxlength:9,minlength:9,required:!0,type:String,unique:!0},email:[{required:!0,type:String,unique:!0}],git:String,key:Boolean,lastName:{required:!0,type:String},name:{required:!0,type:String},phone:[{type:String,unique:!0}],photo:{default:"",type:String},status:{ref:"status",required:!0,type:o.Schema.Types.ObjectId}});s.plugin(a.default);var i=o.model("Members",s);t.MembersModel=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CareersModel=void 0;var o=r(2),a=n(r(6)),s=new o.Schema({code:{maxlength:2,minlength:2,type:String,unique:!0},name:{type:String,unique:!0}});s.plugin(a.default);var i=o.model("careers",s);t.CareersModel=i},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mailer=void 0;var s=a(r(24)),i=process.env.EMAIL_SENDER,u=process.env.PASSWORD;t.mailer=function(e,t,r,a){return n(void 0,void 0,void 0,(function(){var n,c,l;return o(this,(function(o){switch(o.label){case 0:n=s.default.createTransport({auth:{pass:u,user:i},service:"Gmail"}),c={from:"ACECOM <"+i+">",html:a||"",sender:i,subject:e,text:t,to:r},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.sendMail(c)];case 2:return[2,o.sent()];case 3:throw l=o.sent(),console.log("Error at mailer.js"),l;case 4:return[2]}}))}))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StatusModel=void 0;var o=r(2),a=n(r(6)),s=new o.Schema({name:{required:!0,type:String,unique:!0}});s.plugin(a.default);var i=o.model("status",s);t.StatusModel=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nullPromise=void 0,t.nullPromise=function(){return new Promise((function(e){return setTimeout((function(){return e(null)}),0)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(14).Server.start()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var i=s(r(0)),u=s(r(2)),c=s(r(15)),l=r(16),f=r(32),h=new(function(){function e(){this.app=i.default(),this._config()}return e.prototype._config=function(){this.app.set("port",process.env.PORT||"3000"),this.app.use(c.default("dev")),this.app.use(i.default.json()),this.app.use(i.default.urlencoded({extended:!1})),this.app.use((function(e,t,r){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Authorization, Content-Type"),r()})),l.applyRoutes(this.app)},e.prototype._mongo=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return this._connection=u.default.connection,e={keepAlive:!0,useCreateIndex:!0,useFindAndModify:!1,useNewUrlParser:!0,useUnifiedTopology:!0},this._connection.on("connected",(function(){console.log("Mongo connection established.")})),this._connection.on("reconnected",(function(){console.log("Mongo connection reestablished")})),this._connection.on("disconnected",(function(){console.log("Mongo connection disconnected"),console.log("Trying to reconnected to Mongo..."),setTimeout((function(){u.default.connect(process.env.MONGO,n(n({},e),{connectTimeoutMS:3e3,socketTimeoutMS:3e3}))}),3e3)})),this._connection.on("close",(function(){console.log("Mongo connection closed")})),this._connection.on("error",(function(e){console.log("Mongo connection error:"),console.error(e)})),[4,u.default.connect(process.env.MONGO,e)];case 1:return t.sent(),[2]}}))}))},e.prototype.start=function(){var e=this;this.app.listen(this.app.get("port"),(function(){return console.log("Server running at port "+e.app.get("port"))}));try{this._mongo(),f.birthdayChecker.start()}catch(e){console.error(e)}},e}());t.Server=h},function(e,t){e.exports=require("morgan")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyRoutes=void 0;var n=r(17),o=r(18),a=r(20),s=r(22),i=r(25),u=r(27),c=r(30),l=[o.Areas,a.Careers,s.ContactUs,i.Members,u.Projects,c.Status];t.applyRoutes=function(e){e.use("",n.Home),l.forEach((function(t){e.use("/api",t)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Home=void 0;var n=r(0),o=r(1),a=n.Router();t.Home=a,a.get("",(function(e,t){o.response(!1,"Welcome to the new version of HARPER",t,200)}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Areas=void 0;var s=a(r(3)),i=r(0),u=r(19),c=r(1),l=r(4),f=r(5),h=process.env.SECRETE_KEY,p=i.Router();t.Areas=p,p.get("/areas",(function(e,t){c.response(!1,"This is the endpoint to upload data of an area",t,200)})),p.post("/areas",l.ensureToken,(function(e,t){return n(void 0,void 0,void 0,(function(){var r,a,i,l;return o(this,(function(p){return r=e.body.args,a=e.token,i=r.type,l=new u.Areas(r),s.default.verify(a,h,(function(e,r){return n(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return e?(console.log(e),c.response(!0,{message:f.toTitleCase(e.message)},t,403),[3,5]):[3,1];case 1:return o.trys.push([1,3,,4]),[4,l.process(i)];case 2:return n=o.sent(),c.response(!1,{result:n},t,200),[3,4];case 3:return a=o.sent(),c.response(!0,{message:a.message},t,500),[3,4];case 4:console.log(r),o.label=5;case 5:return[2]}}))}))})),[2]}))}))}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Areas=void 0;var a=r(7),s=function(){function e(e){this._args=e}return e.prototype.process=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:switch(t=this._args.data,e){case"store":return[3,1];case"getAll":return[3,3];case"getOne":return[3,5];case"update":return[3,7]}return[3,9];case 1:return[4,this._store(t)];case 2:return r=n.sent(),[3,9];case 3:return[4,this._getAll()];case 4:return r=n.sent(),[3,9];case 5:return[4,this._getOne(t)];case 6:return r=n.sent(),[3,9];case 7:return[4,this._update(t)];case 8:r=n.sent(),n.label=9;case 9:return[2,r]}}))}))},e.prototype._store=function(e){return n(this,void 0,void 0,(function(){var t,r,n,s,i,u,c;return o(this,(function(o){switch(o.label){case 0:t=e.abstract,r=e.image,n=e.name,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,a.AreasModel.findOne({}).sort({code:-1})];case 2:return s=o.sent(),i=void 0,s?(u=s.code+1,i=new a.AreasModel({abstract:t,code:u,image:r,name:n})):i=new a.AreasModel({abstract:t,image:r,name:n}),[4,i.save()];case 3:return[2,o.sent()];case 4:throw c=o.sent(),console.log("There was a problem trying to store the area."),c;case 5:return[2]}}))}))},e.prototype._getAll=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a.AreasModel.find({},"-__v")];case 1:return[2,t.sent()];case 2:throw e=t.sent(),console.log("There was a problem trying to get all the areas."),e;case 3:return[2]}}))}))},e.prototype._getOne=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(o){switch(o.label){case 0:t=e.name,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.AreasModel.findOne({name:{$eq:t}},"-__v")];case 2:if(!(r=o.sent()))throw new Error("The requested area doesn't exist.");return[2,r];case 3:if((n=o.sent()).message)throw console.log(n),n;throw console.log("There was a problem trying to get the requested areas."),n;case 4:return[2]}}))}))},e.prototype._update=function(e){return n(this,void 0,void 0,(function(){var t,r,n,s,i,u,c,l,f,h,p,d;return o(this,(function(o){switch(o.label){case 0:return t=e.abstract,r=e.image,n=e.name,s=e.newName,[4,a.AreasModel.findOne({name:n})];case 1:if(!o.sent())throw new Error("The requested area doesn't exists!");if(!(t&&r&&s))return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,a.AreasModel.findOneAndUpdate({name:{$eq:n}},{abstract:t,image:r,name:s},{new:!0})];case 3:return i=o.sent(),[3,5];case 4:throw u=o.sent(),console.error("There was a problem trying to update the abstract, image or name"),u;case 5:return[3,37];case 6:if(t||!r||!s)return[3,11];o.label=7;case 7:return o.trys.push([7,9,,10]),[4,a.AreasModel.findOneAndUpdate({name:{$eq:n}},{image:r,name:s},{new:!0})];case 8:return i=o.sent(),[3,10];case 9:throw c=o.sent(),console.error("There was a problem trying to update the image or name"),c;case 10:return[3,37];case 11:if(!t||r||!s)return[3,16];o.label=12;case 12:return o.trys.push([12,14,,15]),[4,a.AreasModel.findOneAndUpdate({name:{$eq:n}},{abstract:t,name:s},{new:!0})];case 13:return i=o.sent(),[3,15];case 14:throw l=o.sent(),console.error("There was a problem trying to update the abstract or name"),l;case 15:return[3,37];case 16:if(!t||!r||s)return[3,21];o.label=17;case 17:return o.trys.push([17,19,,20]),[4,a.AreasModel.findOneAndUpdate({name:{$eq:n}},{abstract:t,image:r},{new:!0})];case 18:return i=o.sent(),[3,20];case 19:throw f=o.sent(),console.error("There was a problem trying to update the abstract or image"),f;case 20:return[3,37];case 21:if(t||r||!s)return[3,26];o.label=22;case 22:return o.trys.push([22,24,,25]),[4,a.AreasModel.findOneAndUpdate({name:{$eq:n}},{name:s},{new:!0})];case 23:return i=o.sent(),[3,25];case 24:throw h=o.sent(),console.error("There was a problem trying to update the name"),h;case 25:return[3,37];case 26:if(t||!r||s)return[3,31];o.label=27;case 27:return o.trys.push([27,29,,30]),[4,a.AreasModel.findOneAndUpdate({name:{$eq:n}},{image:r},{new:!0})];case 28:return i=o.sent(),[3,30];case 29:throw p=o.sent(),console.error("There was a problem trying to update the image"),p;case 30:return[3,37];case 31:if(!t||r||s)return[3,36];o.label=32;case 32:return o.trys.push([32,34,,35]),[4,a.AreasModel.findOneAndUpdate({name:{$eq:n}},{abstract:t},{new:!0})];case 33:return i=o.sent(),[3,35];case 34:throw d=o.sent(),console.error("There was a problem trying to update the image"),d;case 35:return[3,37];case 36:throw new Error("There's nothing to update!");case 37:return[2,i]}}))}))},e}();t.Areas=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Careers=void 0;var s=a(r(3)),i=r(0),u=r(21),c=r(1),l=r(4),f=r(5),h=process.env.SECRETE_KEY,p=i.Router();t.Careers=p,p.get("/careers",(function(e,t){c.response(!1,"This is the endpoint to upload the careers in the database",t,200)})),p.post("/careers",l.ensureToken,(function(e,t){return n(void 0,void 0,void 0,(function(){var r,a,i,l;return o(this,(function(p){return r=e.body.args,a=e.token,i=r.type,l=new u.Careers(r),s.default.verify(a,h,(function(e,r){return n(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return e?(console.log(e),c.response(!0,{message:f.toTitleCase(e.message)},t,403),[3,5]):[3,1];case 1:return o.trys.push([1,3,,4]),[4,l.process(i)];case 2:return n=o.sent(),c.response(!1,{result:n},t,200),[3,4];case 3:return a=o.sent(),c.response(!0,{message:a.message},t,500),[3,4];case 4:console.log(r),o.label=5;case 5:return[2]}}))}))})),[2]}))}))}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Careers=void 0;var a=r(9),s=function(){function e(e){this._args=e}return e.prototype.process=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:switch(t=this._args.data,e){case"store":return[3,1];case"getAll":return[3,3];case"getOne":return[3,5]}return[3,7];case 1:return[4,this._store(t)];case 2:return r=n.sent(),[3,7];case 3:return[4,this._getAll()];case 4:return r=n.sent(),[3,7];case 5:return[4,this._getOne(t)];case 6:r=n.sent(),n.label=7;case 7:return[2,r]}}))}))},e.prototype._store=function(e){return n(this,void 0,void 0,(function(){var t,r,n,s;return o(this,(function(o){switch(o.label){case 0:t=e.code,r=e.name,n=new a.CareersModel({code:t,name:r}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.save()];case 2:return[2,o.sent()];case 3:throw s=o.sent(),console.log("There was a problem trying to store the career in the database"),s;case 4:return[2]}}))}))},e.prototype._getAll=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a.CareersModel.find({},"code name")];case 1:return[2,t.sent()];case 2:throw e=t.sent(),console.log("There was an error trying to get all the careers"),e;case 3:return[2]}}))}))},e.prototype._getOne=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(o){switch(o.label){case 0:t=e.code,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.CareersModel.findOne({code:{$eq:t}},"code name")];case 2:if(!(r=o.sent()))throw new Error("The requested career doesn't exists.");return[2,r];case 3:if((n=o.sent()).message)throw n;throw new Error("There was a problem trying to get the requested career");case 4:return[2]}}))}))},e}();t.Careers=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContactUs=void 0;var s=a(r(3)),i=r(0),u=r(23),c=r(1),l=r(4),f=r(5),h=process.env.SECRETE_KEY,p=i.Router();t.ContactUs=p,p.get("/contactUs",(function(e,t){c.response(!1,"This is the endpoint to contact to ACECOM",t,200)})),p.post("/contactUs",l.ensureToken,(function(e,t){return n(void 0,void 0,void 0,(function(){var r,a,i,l;return o(this,(function(p){return r=e.body.args,a=e.token,i=r.type,l=new u.ContactUs(r),s.default.verify(a,h,(function(e,r){return n(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return e?(console.log(e),c.response(!0,{message:f.toTitleCase(e.message)},t,403),[3,5]):[3,1];case 1:return o.trys.push([1,3,,4]),[4,l.process(i)];case 2:return n=o.sent(),c.response(!1,{result:n},t,200),[3,4];case 3:return a=o.sent(),c.response(!0,{message:a.message},t,500),[3,4];case 4:console.log(r),o.label=5;case 5:return[2]}}))}))})),[2]}))}))}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContactUs=void 0;var a=r(10),s=[process.env.EMAIL_RECEIVER_1,process.env.EMAIL_RECEIVER_2,process.env.EMAIL_RECEIVER_3,process.env.EMAIL_RECEIVER_4],i=function(){function e(e){this._args=e}return e.prototype.process=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=this._args.data,"mail"!==e?[3,2]:[4,this.mail(t)];case 1:return[2,r.sent()];case 2:return[4,new Promise((function(e){return setTimeout((function(){return e("The key has been already sent")}),0)}))];case 3:return[2,r.sent()]}}))}))},e.prototype.mail=function(e){return n(this,void 0,void 0,(function(){var t,r,n,i,u,c;return o(this,(function(o){switch(o.label){case 0:t=e.lastName,r=e.mail,n=e.message,i=e.name,u=e.subject,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.mailer(u,"Message from: ACECOM's web page\nContact info:\nFull name: "+i+" "+t+"\nEmail: "+r+"\nMessage: "+n,s[0]+", "+s[1]+", "+s[2]+", "+s[3])];case 2:return[2,o.sent()];case 3:throw c=o.sent(),console.log("There was a problem while trying to send the message"),c;case 4:return[2]}}))}))},e}();t.ContactUs=i},function(e,t){e.exports=require("nodemailer")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Members=void 0;var s=a(r(3)),i=r(0),u=r(26),c=r(1),l=r(4),f=r(5),h=process.env.SECRETE_KEY,p=i.Router();t.Members=p,p.get("/members",(function(e,t){c.response(!1,"This is the endpoint that returns the members data",t,200)})),p.post("/members",l.ensureToken,(function(e,t){return n(void 0,void 0,void 0,(function(){var r,a,i,l;return o(this,(function(p){return r=e.body.args,a=e.token,i=r.type,l=new u.DataMembers(r),s.default.verify(a,h,(function(e,r){return n(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return e?(console.log(e),c.response(!0,{message:f.toTitleCase(e.message)},t,403),[3,5]):[3,1];case 1:return o.trys.push([1,3,,4]),[4,l.process(i)];case 2:return n=o.sent(),c.response(!1,{result:n},t,200),[3,4];case 3:return a=o.sent(),c.response(!0,{message:a.message},t,500),[3,4];case 4:console.log(r),o.label=5;case 5:return[2]}}))}))})),[2]}))}))}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataMembers=void 0;var a=r(9),s=r(8),i=r(7),u=r(11),c=r(12),l=function(){function e(e){this._args=e}return e.prototype.process=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:switch(t=this._args.data,e){case"store":return[3,1];case"getAll":return[3,3];case"getMembersPerArea":return[3,5];case"getOne":return[3,7];case"update":return[3,9]}return[3,11];case 1:return[4,this._store(t)];case 2:return r=n.sent(),[3,11];case 3:return[4,this._getAll()];case 4:return r=n.sent(),[3,11];case 5:return[4,this._getMembersPerArea(t)];case 6:return r=n.sent(),[3,11];case 7:return[4,this._getOne(t)];case 8:return r=n.sent(),[3,11];case 9:return[4,this._update(t)];case 10:return r=n.sent(),[3,11];case 11:return[2,r]}}))}))},e.prototype._store=function(e){return n(this,void 0,void 0,(function(){var t,r,n,c,l,f,h,p,d,y,b,v,m,w,g,_,M;return o(this,(function(o){switch(o.label){case 0:if(t=e.area,r=e.birthday,n=e.career,c=e.code,l=e.email,f=e.git,h=e.key,p=e.lastName,d=e.name,y=e.phone,b=e.photo,v=e.status,!(t&&r&&n&&c&&l&&p&&d&&v))throw new Error("The are, birthday, career, code, email, lastName, name, or status is missing!");o.label=1;case 1:return o.trys.push([1,4,,5]),[4,Promise.all([a.CareersModel.findOne({code:n},"_id"),i.AreasModel.findOne({name:t},"_id"),u.StatusModel.findOne({name:v},"_id")])];case 2:return m=o.sent(),w=m[0],g=m[1],_=m[2],[4,new s.MembersModel({area:g,birthday:new Date(r),career:w,code:c,email:l,git:f,key:h,lastName:p,name:d,phone:y,photo:b,status:_}).save()];case 3:return[2,o.sent()];case 4:throw M=o.sent(),console.log("There was an error trying to save a new member"),M;case 5:return[2]}}))}))},e.prototype._getAll=function(){return n(this,void 0,void 0,(function(){var e,t;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.MembersModel.find({}).populate({path:"area",select:"name -_id"}).populate({path:"career",select:"code name -_id"}).populate({path:"status",select:"name -_id"}).exec()];case 1:return e=r.sent(),[2,e.map((function(e){return{area:e.area.name,birthday:e.birthday.toJSON().slice(0,10),career:e.career,code:e.code,email:e.email,git:e.git,key:e.key,lastName:e.lastName,name:e.name,phone:e.phone,photo:e.photo,status:e.status.name}}))];case 2:throw t=r.sent(),console.log("There was a problem trying to get all the members"),t;case 3:return[2]}}))}))},e.prototype._getMembersPerArea=function(e){return n(this,void 0,void 0,(function(){var t,r,n,a;return o(this,(function(o){switch(o.label){case 0:t=e.area,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,i.AreasModel.findOne({name:t},"_id")];case 2:return r=o.sent(),[4,s.MembersModel.find({area:r}).populate({path:"area",select:"name -_id"}).populate({path:"career",select:"code name -_id"}).populate({path:"status",select:"name -_id"}).exec()];case 3:return n=o.sent(),[2,n.map((function(e){return{area:e.area.name,birthday:e.birthday.toJSON().slice(0,10),career:e.career,code:e.code,email:e.email,git:e.git,key:e.key,lastName:e.lastName,name:e.name,phone:e.phone,photo:e.photo,status:e.status.name}}))];case 4:throw a=o.sent(),console.log("There was a problem while trying to get the data"),a;case 5:return[2]}}))}))},e.prototype._getOne=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(o){switch(o.label){case 0:t=e.code,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.MembersModel.findOne({code:{$eq:t}},"-__v").populate({path:"area",select:"name -_id"}).populate({path:"career",select:"code name -_id"}).populate({path:"status",select:"name -_id"})];case 2:if(!(r=o.sent()))throw new Error("The requested user doesn't exist.");return[2,{area:r.area.name,birthday:r.birthday.toJSON().slice(0,10),career:r.career,code:r.code,email:r.email,git:r.git,key:r.key,lastName:r.lastName,name:r.name,phone:r.phone,photo:r.photo,status:r.status.name}];case 3:if((n=o.sent()).message)throw console.log(n),n;throw console.log("The was a problem trying to get the requested student."),n;case 4:return[2]}}))}))},e.prototype._update=function(e){return n(this,void 0,void 0,(function(){var t,r,n,l,f,h,p,d,y,b,v,m,w,g,_,M,O;return o(this,(function(o){switch(o.label){case 0:t=e.area,r=e.birthday,n=e.career,l=e.code,f=e.email,h=e.git,p=e.key,d=e.lastName,y=e.name,b=e.newCode,v=e.phone,m=e.photo,w=e.status,o.label=1;case 1:if(o.trys.push([1,19,,20]),!l)throw new Error("The code is mandatory!");return[4,s.MembersModel.findOne({code:l})];case 2:if(!(g=o.sent()))throw new Error("The code is incorrect!");return _=void 0,t&&n&&w?[4,Promise.all([i.AreasModel.findOne({name:t},"_id"),a.CareersModel.findOne({name:n},"_id"),u.StatusModel.findOne({name:w},"_id")])]:[3,4];case 3:return _=o.sent(),[3,17];case 4:return!t&&n&&w?[4,Promise.all([c.nullPromise(),a.CareersModel.findOne({name:n},"_id"),u.StatusModel.findOne({name:w},"_id")])]:[3,6];case 5:return _=o.sent(),[3,17];case 6:return t&&!n&&w?[4,Promise.all([i.AreasModel.findOne({name:t},"_id"),c.nullPromise(),u.StatusModel.findOne({name:w},"_id")])]:[3,8];case 7:return _=o.sent(),[3,17];case 8:return t&&n&&!w?[4,Promise.all([i.AreasModel.findOne({name:t},"_id"),a.CareersModel.findOne({name:n},"_id"),c.nullPromise()])]:[3,10];case 9:return _=o.sent(),[3,17];case 10:return t||n||!w?[3,12]:[4,Promise.all([c.nullPromise(),c.nullPromise(),u.StatusModel.findOne({name:w},"_id")])];case 11:return _=o.sent(),[3,17];case 12:return t||!n||w?[3,14]:[4,Promise.all([c.nullPromise(),a.CareersModel.findOne({name:n},"_id"),c.nullPromise()])];case 13:return _=o.sent(),[3,17];case 14:return!t||n||w?[3,16]:[4,Promise.all([i.AreasModel.findOne({name:t},"_id"),c.nullPromise(),c.nullPromise()])];case 15:return _=o.sent(),[3,17];case 16:throw new Error("Area, career or status are missing!");case 17:return M={area:t?_[0]:g.area,birthday:r?new Date(r):g.birthday,career:n?_[1]:g.career,code:b||l,email:f||g.email,git:h||g.git,key:p||g.key,lastName:d||g.lastName,name:y||g.name,phone:v||g.phone,photo:m||g.photo,status:w?_[2]:g.status},[4,s.MembersModel.findOneAndUpdate({code:l},M,{new:!0})];case 18:return[2,o.sent()];case 19:if((O=o.sent()).message)throw console.log(O.message),O;throw console.log("There was an error trying to update the requested member"),O;case 20:return[2]}}))}))},e}();t.DataMembers=l},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Projects=void 0;var s=a(r(3)),i=r(0),u=r(28),c=r(1),l=r(4),f=r(5),h=process.env.SECRETE_KEY,p=i.Router();t.Projects=p,p.get("/projects",(function(e,t){c.response(!1,"This is the endpoint to upload the projects from ACECOM's areas",t,200)})),p.post("/projects",l.ensureToken,(function(e,t){return n(void 0,void 0,void 0,(function(){var r,a,i,l;return o(this,(function(p){return r=e.body.args,a=e.token,i=r.type,l=new u.Projects(r),s.default.verify(a,h,(function(e,r){return n(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return e?(console.log(e),c.response(!0,{message:f.toTitleCase(e.message)},t,403),[3,5]):[3,1];case 1:return o.trys.push([1,3,,4]),[4,l.process(i)];case 2:return n=o.sent(),c.response(!1,{result:n},t,200),[3,4];case 3:return a=o.sent(),c.response(!0,{message:a.message},t,500),[3,4];case 4:console.log(r),o.label=5;case 5:return[2]}}))}))})),[2]}))}))}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Projects=void 0;var a=r(29),s=r(7),i=r(8),u=r(12),c=function(){function e(e){this._args=e}return e.prototype.process=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:switch(t=this._args.data,e){case"store":return[3,1];case"getAll":return[3,3];case"getOne":return[3,5];case"getProjectsPerArea":return[3,7];case"update":return[3,9]}return[3,11];case 1:return[4,this._store(t)];case 2:return r=n.sent(),[3,11];case 3:return[4,this.getAll()];case 4:return r=n.sent(),[3,11];case 5:return[4,this.getOne(t)];case 6:return r=n.sent(),[3,11];case 7:return[4,this.getProjectsPerArea(t)];case 8:return r=n.sent(),[3,11];case 9:return[4,this.update(t)];case 10:r=n.sent(),n.label=11;case 11:return[2,r]}}))}))},e.prototype._store=function(e){return n(this,void 0,void 0,(function(){var t,r,n,u,c,l,f,h;return o(this,(function(o){switch(o.label){case 0:if(t=e.area,r=e.description,n=e.name,u=e.participants,c=e.repo,l=e.topic,!t)throw new Error("The area is mandatory!");if(!r)throw new Error("The description is mandatory!");if(!n)throw new Error("The name is mandatory!");if(!u)throw new Error("The participants are mandatory!");if(!l)throw new Error("The topic is mandatory!");o.label=1;case 1:return o.trys.push([1,4,,5]),[4,Promise.all([s.AreasModel.findOne({name:t},"_id"),i.MembersModel.find({code:{$in:u}},"_id")])];case 2:return f=o.sent(),void 0,[4,(c?new a.ProjectsModel({area:f[0],description:r,name:n,participants:f[1],repo:c,topic:l}):new a.ProjectsModel({area:f[0],description:r,name:n,participants:f[1],topic:l})).save()];case 3:return[2,o.sent()];case 4:if((h=o.sent()).message)throw console.log(h.message),h;throw console.log("There was an error while trying to store the project"),h;case 5:return[2]}}))}))},e.prototype.getAll=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a.ProjectsModel.find({},"-__v")];case 1:return[2,t.sent()];case 2:throw e=t.sent(),console.log(e.message),e;case 3:return[2]}}))}))},e.prototype.getOne=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(o){switch(o.label){case 0:t=e.name,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.ProjectsModel.findOne({name:{$eq:t}},"-__v")];case 2:if(!(r=o.sent()))throw new Error("The requested project doesn't exists.");return[2,r];case 3:if((n=o.sent()).message)throw console.log(n.message),n;throw console.log("There was a problem getting the requested project"),n;case 4:return[2]}}))}))},e.prototype.getProjectsPerArea=function(e){return n(this,void 0,void 0,(function(){var t,r,n,i;return o(this,(function(o){switch(o.label){case 0:t=e.area,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,s.AreasModel.findOne({name:{$eq:t}},"_id")];case 2:return r=o.sent(),[4,a.ProjectsModel.find({area:{$eq:r}},"-__v").populate({path:"participants",select:"name lastName code git -_id"}).populate({path:"area",select:"name -_id"}).exec()];case 3:return n=o.sent(),[2,n.map((function(e){var t=e.participants.map((function(e){return{code:e.code,fullName:e.name+" "+e.lastName,git:e.git||""}}));return{area:e.area.name,description:e.description,name:e.name,participants:t,repo:e.repo,topic:e.topic}}))];case 4:if((i=o.sent()).message)throw console.log(i),i;throw console.log("There was a problem while trying to get all the requested projects."),i;case 5:return[2]}}))}))},e.prototype.update=function(e){return n(this,void 0,void 0,(function(){var t,r,n,c,l,f,h,p,d,y,b,v,m,w,g;return o(this,(function(o){switch(o.label){case 0:if(t=e.area,r=e.description,n=e.name,c=e.newName,l=e.participants,f=e.repo,h=e.topic,!n)throw new Error("The name is mandatory!");return[4,a.ProjectsModel.findOne({name:{$eq:n}})];case 1:if(!(p=o.sent()))throw new Error("The project name is incorrect");o.label=2;case 2:return o.trys.push([2,14,,15]),t&&l?[4,Promise.all([s.AreasModel.findOne({name:{$eq:t}},"_id"),i.MembersModel.find({code:{$in:l}},"_id")])]:[3,4];case 3:return d=o.sent(),[3,12];case 4:return!t||l?[3,7]:(b=(y=Promise).all,[4,s.AreasModel.findOne({name:{$eq:t}},"_id")]);case 5:return[4,b.apply(y,[[o.sent(),u.nullPromise()]])];case 6:return d=o.sent(),[3,12];case 7:return t||!l?[3,10]:(m=(v=Promise).all,w=[u.nullPromise()],[4,i.MembersModel.find({code:{$in:l}},"_id")]);case 8:return[4,m.apply(v,[w.concat([o.sent()])])];case 9:return d=o.sent(),[3,12];case 10:return[4,Promise.all([u.nullPromise(),u.nullPromise()])];case 11:d=o.sent(),o.label=12;case 12:return[4,a.ProjectsModel.findOneAndUpdate({name:{$eq:n}},{area:d[0]||p.area,description:r||p.description,name:c||n,participants:d[1]||p.participants,repo:f||p.repo,topic:h||p.topic},{new:!0})];case 13:return[2,o.sent()];case 14:if((g=o.sent()).message)throw console.log(g.message),g;throw console.log("There was a problem while updating the requested project"),g;case 15:return[2]}}))}))},e}();t.Projects=c},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectsModel=void 0;var o=r(2),a=n(r(6)),s=new o.Schema({area:{ref:"areas",required:!0,type:o.Schema.Types.ObjectId},description:{required:!0,type:String},name:{required:!0,type:String,unique:!0},participants:[{ref:"members",required:!0,type:o.Schema.Types.ObjectId}],repo:[{default:"",type:String}],topic:{required:!0,type:String}});s.plugin(a.default);var i=o.model("projects",s);t.ProjectsModel=i},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;var s=a(r(3)),i=r(0),u=r(31),c=r(1),l=r(4),f=r(5),h=process.env.SECRETE_KEY,p=i.Router();t.Status=p,p.get("/status",(function(e,t){c.response(!1,"This is the endpoint that returns the member status data",t,200)})),p.post("/status",l.ensureToken,(function(e,t){return n(void 0,void 0,void 0,(function(){var r,a,i,l;return o(this,(function(p){return r=e.body.args,a=e.token,i=r.type,l=new u.Status(r),s.default.verify(a,h,(function(e,r){return n(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:return e?(console.log(e),c.response(!0,{message:f.toTitleCase(e.message)},t,403),[3,5]):[3,1];case 1:return o.trys.push([1,3,,4]),[4,l.process(i)];case 2:return n=o.sent(),c.response(!1,{result:n},t,200),[3,4];case 3:return a=o.sent(),c.response(!0,{message:a.message},t,500),[3,4];case 4:console.log(r),o.label=5;case 5:return[2]}}))}))})),[2]}))}))}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;var a=r(11),s=function(){function e(e){this._args=e}return e.prototype.process=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:switch(t=this._args.data,e){case"store":return[3,1];case"getAll":return[3,3];case"getOne":return[3,5]}return[3,7];case 1:return[4,this._store(t)];case 2:return r=n.sent(),[3,7];case 3:return[4,this._getAll()];case 4:return r=n.sent(),[3,7];case 5:return[4,this._getOne(t)];case 6:r=n.sent(),n.label=7;case 7:return[2,r]}}))}))},e.prototype._store=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(o){switch(o.label){case 0:t=e.name,r=new a.StatusModel({name:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.save()];case 2:return[2,o.sent()];case 3:throw n=o.sent(),console.log("There was an error trying to store the new status"),n;case 4:return[2]}}))}))},e.prototype._getAll=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a.StatusModel.find({},"-__v -_id")];case 1:return[2,t.sent()];case 2:throw e=t.sent(),console.log("There was an error trying to get all the status"),e;case 3:return[2]}}))}))},e.prototype._getOne=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(o){switch(o.label){case 0:t=e.name,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.StatusModel.findOne({name:{$eq:t}},"-__v -_id")];case 2:if(!(r=o.sent()))throw console.log("The requested status doesn't exist."),new Error("The requested status doesn't exist.");return[2,r];case 3:if((n=o.sent()).message)throw n;throw console.log("There was an error trying to get the requested status"),n;case 4:return[2]}}))}))},e}();t.Status=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.birthdayChecker=void 0;var a=r(33),s=r(10),i=r(8),u=new a.CronJob("00 00 5 * * *",(function(){return n(void 0,void 0,void 0,(function(){var e,t,r,n,a;return o(this,(function(o){switch(o.label){case 0:return e=new Date((new Date).getTime()),r=e.getMonth()>=10?(e.getMonth()+1).toString():"0"+(e.getMonth()+1),t=e.getUTCDate()>=10?e.getUTCDate().toString():"0"+e.getUTCDate(),[4,i.MembersModel.find({},"-_id name birthday email")];case 1:return n=o.sent(),0===(a=n.filter((function(e){return e.birthday.toISOString().slice(0,10).split("-").slice(1,3).toString()===r+","+t}))).length?[3,4]:[4,s.mailer("Feliz cumpleaos!","De parte de ACECOM, deseamos que pases un lindo da :)\nFeliz cumpleaos "+a[0].name.split(" ")[0]+"!",a[0].email[0])];case 2:return o.sent(),[4,s.mailer("Birthday report","Today was "+a[0].name+"'s birthday",process.env.EMAIL_RECEIVER_1)];case 3:return o.sent(),[3,6];case 4:return[4,s.mailer("Birthday report","Today there was no birthday",process.env.EMAIL_RECEIVER_1)];case 5:o.sent(),o.label=6;case 6:return[2]}}))}))}));t.birthdayChecker=u},function(e,t){e.exports=require("cron")}]);